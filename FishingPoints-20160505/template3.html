
<div class="row skeleton"> <!-- Start Skeleton Row-->
    <div class="col-md-6 "><!-- Start of Question and Submission DIV (column) -->
        <h1 id="question">
        <div id="vessel-title"></div></h1> 
        <div id="availableDates"><span id="currentMonth"></span></div>
    </div>
   
    <button class="btn btn-success btn-answer"<i class="fa fa-thumbs-o-up"></i> Submit!</button>             
    </div>
    <!-- End Success and Error Messages for the user -->

   
        <!-- Success and Error Messages for the user --> 

    <div class="row">
        <div class="col-md-6 col-md-offset-2" style="height:50px">
            <div id="success" class="alert alert-success" style="display:none;">
                <a class="close">×</a>
                <strong id="i18n_welldone">Well done!</strong> <span id="i18n_welldone_text">Your answer has been saved</span>
            </div>
            <div id="loading" class="alert alert-info" style="display:none;">
                <a class="close">×</a>
                <span id="i18n_loading_next_task">Loading next task...</span>
            </div>
            <div id="taskcompleted" class="alert alert-info" style="display:none;">
                <strong id="i18n_task_completed">The task has been completed!</strong> <span id="i18n_thanks">Thanks a lot!</span>
            </div>
            <div id="finish" class="alert alert-success" style="display:none;">
                <strong id="i18n_congratulations">Congratulations!</strong> <span id="i18n_congratulations_text">You have participated in all available tasks!</span>
                <br/>
                <div class="alert-actions">
                    <a class="btn small" href="/">Go back</a>
                    <a class="btn small" href="/app">or, Check other projects</a>
                </div>
            </div>
            <div id="error" class="alert alert-danger" style="display:none;">
                <a class="close">×</a>
                <strong>Error!</strong> Something went wrong, please contact the site administrators
            </div>
        </div> 
    </div>

    <!-- Feedback items for the user -->
    <p><span id="i18n_working_task">You are working now on task:</span> <span id="task-id" class="label label-warning">#</span></p>
    <p><span id="i18n_tasks_completed">You have completed:</span> <span id="done" class="label label-info"></span> <span id="i18n_tasks_from">tasks from</span>
    <!-- Progress bar for the user -->
    <span id="total" class="label label-info"></span></p>
    <div class="progress progress-striped">
        <div id="progress" rel="tooltip" title="#" class="progress-bar" style="width: 0%;"  role="progressbar"></div>
    </div>
    <div id="marineTraffic" style="color:black;font-size:17px;padding-bottom:5px;"></div>
    <div id="googleSearch" style="color:black;font-size:17px;padding-bottom:5px;"></div>
    <div id="marineTrafficiFrame"></div>
    <div id="histogramImage"></div>

</div>



<!--jquery library, D3 library, mapbox library, and mapbox stylesheet -->
<script src="https://code.jquery.com/ui/1.11.1/jquery-ui.js"></script>
<script src="//d3js.org/d3.v3.min.js" charset="utf-8"></script>
<script src='https://api.tiles.mapbox.com/mapbox.js/v2.2.3/mapbox.js'></script>  
<link href='https://api.mapbox.com/mapbox.js/v2.2.3/mapbox.css?1010' rel='stylesheet' />
<link href='https://api.mapbox.com/mapbox.js/plugins/leaflet-draw/v0.2.3/leaflet.draw.css' rel='stylesheet' />
<script src='https://api.mapbox.com/mapbox.js/plugins/leaflet-draw/v0.2.3/leaflet.draw.js'></script>
<script src='https://api.mapbox.com/mapbox.js/plugins/leaflet-geodesy/v0.1.0/leaflet-geodesy.js'></script>

<!--external stylesheet, stored in google cloud -->
<!-- <link href='https://storage.googleapis.com/gfw-crowd/task_assets/idtracks_pbossa.css' rel='stylesheet' /> -->

<link rel="stylesheet" href="https://storage.googleapis.com/gfw-crowd/task_assets/jquery-ui-mod-ecowest2.css">
<script src="https://storage.googleapis.com/gfw-crowd/task_assets/jquery.ui.labeledslider.js"></script>
<link rel="stylesheet" type="text/css" href="https://storage.googleapis.com/gfw-crowd/task_assets/select_points.css" />


<script>


// Update userLocale with server side information
 $(document).ready(function(){
     userLocale = document.getElementById('PYBOSSA_USER_LOCALE').textContent.trim();
});

function loadUserProgress() {
    pybossa.userProgress('id_fishing_points').done(function(data){
        var pct = Math.round((data.done*100)/data.total);
        $("#progress").css("width", pct.toString() +"%");
        $("#progress").attr("title", pct.toString() + "% completed!");
        $("#progress").tooltip({'placement': 'left'}); 
        $("#total").text(data.total);
        $("#done").text(data.done);
    });
}

pybossa.presentTask(function(task, deferred) {
    if ( !$.isEmptyObject(task) ) {
        loadUserProgress();
        $('#task-id').html(task.id);

        $('.btn-answer').off('click').on('click', function(evt) {
            var answer_string = "hello";
            pybossa.saveTask(task.id, answer_string).done(function() {
                deferred.resolve();
                console.log('saving task');
            });
            $("#loading").fadeIn(500);
        });
        $("#loading").hide();
    }
    else {
        $(".skeleton").hide();
        $("#loading").hide();
        $("#finish").fadeIn(500);
    }
});

pybossa.run('id_fishing_points');



</script>
